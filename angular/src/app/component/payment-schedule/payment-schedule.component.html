<mat-spinner *ngIf="spin"></mat-spinner>
<div class="card m-3" *ngIf="!spin">
  <h5 class="card-header text-center">Payment Schedule
  </h5>
  <div class="container-fluid bg-light text-black " style="margin-bottom: 5px;">
    <div class="row">
      <div class="col-2  text-center" style="font-weight:bold;padding-top: 10px;">LOAN DETAILS</div>
      <div class="col">
        <div class="row">
          <div class="col">
            Loan ID :<span style="font-weight:bold"> {{this.loans.loanId}}</span>
          </div>
          <div class="col">
            Loan Amount : <span style="font-weight:bold">{{this.loans.loanAmount|number}}</span>
          </div>
          <div class="col">
            Loan Duration (in years) : <span style="font-weight:bold"> {{this.loans.loanDuration}}</span>
          </div>
          <div class="col">
            Start Date : <span style="font-weight:bold"> {{this.loans.startDate}}</span>
          </div>
        </div>
        <div class="row">
          <div class="col">
            Maturity Date : <span style="font-weight:bold"> {{this.loans.maturityDate}}</span>
          </div>
          <div class="col">
            Payment Frequency :<span style="font-weight:bold"> {{this.loans.paymentFrequency}}</span>
          </div>
          <div class="col">
            Payment Term : <span style="font-weight:bold"> {{this.loans.paymentTerm}}</span>
          </div>
          <div class="col">
            Projected Interest : <span style="font-weight:bold"> {{this.loans.projectedInterest |number}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div style="height: 450px; overflow: auto">
    <table class="table table-responsive-md btn-table">
      <thead>
        <tr>
          <th scope="col">No</th>
          <th scope="col">Payment Date</th>
          <th scope="col">Principal</th>
          <th scope="col">Projected Interest</th>
          <th scope="col">Payment Status</th>
          <th scope="col">Payment Amount</th>
          <th scope="col">Pay</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let payment of payments; index as i">
          <th>{{ i + 1 }}</th>
          <td style="display:none;">{{ payment.paymentId}}</td>
          <td>{{ payment.paymentDate }}</td>
          <td>{{ payment.principal | number }}</td>
          <td>{{ payment.projectedInterest | number }}</td>
          <td>
            <span [ngClass]="getClass(payment.paymentStatus)">{{ payment.paymentStatus}}</span>
          </td>
          <td>{{ payment.paymentAmount | number }}</td>
          <!-- <td>
            <a class="badge badge-pill bg-primary" *ngIf="payment.paymentStatus!='PAID'"
              (click)="changePaymentStatus($event,payment.paymentId)">Pay</a>
          </td> -->
          <td><button class="  button b2" *ngIf="payment.paymentStatus!='PAID'"
              (click)="changePaymentStatus($event,payment.paymentId)"
              [disabled]="payment.paymentDate!=paymentbuttonstatus">Pay</button></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>